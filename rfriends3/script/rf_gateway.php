<?php
 function get_rfriends_exeos() { global $rfriends_exeos; switch ($rfriends_exeos) { case "WIN": $pt = "C:\Windows\system32"; $out = getenv('path'); $pos = strpos($out,$pt); if ($pos === false) { putenv("path=$out;$pt;"); } return $rfriends_exeos; break; case "OSX": case "LNX": return $rfriends_exeos; break; default: echo "--- rfriends_exeos is not defined.\n"; exit(1); break; } } function set_rfriends_exeos() { global $rfriends_exeos; global $cmd_which; $os = PHP_OS; switch ($os) { case "WINNT": case "WIN32": $rfriends_exeos = "WIN"; $cmd_which = ""; break; case "Darwin": $rfriends_exeos = "OSX"; $cmd_which = "command -v"; break; case "Linux": $rfriends_exeos = "LNX"; $cmd_which = "command -v"; break; default: echo "--- This is unknown OS ($os).\n"; $rfriends_exeos = "LNX"; $cmd_which = "command -v"; break; } } function set_rfriends_dir() { global $bindir; global $phpdir; global $null_out; global $DS; global $base; $exeos = get_rfriends_exeos(); switch ($exeos) { case "WIN": $bindir = $base."bin".$DS; $phpdir = $bindir."php".$DS; $null_out = "nul"; break; case "OSX": $bindir = "/usr/local/bin/"; $phpdir = "/usr/local/bin/"; $null_out = "/dev/null"; exec("brew --prefix",$out1,$ret1); if ($ret1 == 0 ) { $bindir = $out1[0]."/bin/"; $phpdir = $bindir; } break; case "LNX": $bindir = ""; $phpdir = ""; $null_out = "/dev/null"; break; default: echo "--- rfriends_exeos is not defined.\n"; exit(1); break; } } set_rfriends_exeos(); 