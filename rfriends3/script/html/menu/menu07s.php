<?php
 $ex_type = $ex_podcast; $xml = file_get_contents($menu_xml); $obj = simplexml_load_string($xml); $json = json_encode($obj); $rf_define = json_decode($json,TRUE); ht_subtitle($subno,""); switch ($subno) { case "070101": $wd = explode(",",$val); $title = $wd[0]; $rss = $wd[1]; $ht_jump_addr = "menu_sss.html"; if (strpos($rss,'audee.jp/') !== false) { $ht_jump_no = "070301"; ht_audee_exec($sel,$rss,$title); } else { $ht_jump_no = "070201"; ht_rss_exec($sel,$rss); } break; case "070102": ht_writefl($val); break; case "070103": $fn = $podcastdat; fin_unlink($cfgdir.$fn); echo_msg(2,"ユーザプリセットの初期化を行いました。"); break; case "070104": echo_msg(2,"ユーザプリセットの一括録音を開始しました。"); echo_msg(2,"処理はバックグラウンドで行います。"); rf_batsh_rec($ex_podcast, 0, 0, 0, 0); break; case "070201": $ht_jump_btn1_label = "選択"; $ht_jump_addr = "menu_s.html"; $ht_jump_no = "070202"; $lists = rf_radiko_station_list(1); $lists2 = $lists[$val]; $opt = array( "title" => "Apple Podcasts(地域 : $val)", "mode" => 1, "multi" => 0, "confirm" => 0, "ht_selid" => "" ); ht_ask_list($lists2,$opt); break; case "070202": $kw = "$val"; if ($kw == "") { echo_msg(2,"キーワードが空なので終了します。"); break; } $lists = rf_applepodcasts_search($kw,200); if ($lists === false) { echo_msg(2,"番組を取得できません。"); break; } $cnt = count_73($lists); if ($cnt < 1) { echo_msg(2,"番組がヒットしませんでした。(kw : $kw)"); break; } $ht_jump_btn2 = 1; $ht_jump_btn1_label = "選択"; $ht_jump_btn2_label = "preset登録"; $opt = array( "title" => "Apple Podcasts(キーワード:'$kw' , $cnt 件)", "mode" => 1, "multi" => 0, "confirm" => 0, "ht_selid" => "", "ht_width" => 80, "num" => 1 ); ht_ask_list($lists,$opt); break; case "070203": $ht_jump_btn2 = 1; $ht_jump_btn1_label = "選択"; $ht_jump_btn2_label = "preset登録"; $dat = explode(",",$val); $id = $dat[0]; $name = $dat[1]; ht_applepodcasts_id($id,$name,200); break; case "070301": $ht_jump_btn2 = 1; $ht_jump_btn1_label = "選択"; $ht_jump_btn2_label = "preset登録"; $val2 = 'program'; echo_msg(2,"キー : $val"); $pgm = ht_menu_brand(5); $home = $pgm['home']; if ($val2 == 'program') $page = $home.'/program/list/'; else $page = $home.'/person/list/'; ht_audee_keylist("Audee index list",0,$page,$val); break; case "070302": $ht_jump_btn2 = 1; $ht_jump_btn1_label = "選択"; $ht_jump_btn2_label = "preset登録"; $kw = "$val"; echo_msg(2,"キーワード：'$kw'"); if ($kw == "") { echo_msg(2,"キーワードが空なので終了します。"); break; } echo_msg(2,""); $pgm = ht_menu_brand(6); $home = $pgm['home']; $lists = ht_audee_src("Audee Podcast kw",0,$home,$kw); break; case "070303": ht_subtitle("070303",""); $ht_jump_btn2 = 1; $ht_jump_btn1_label = "選択"; $ht_jump_btn2_label = "preset登録"; $pgm = ht_menu_brand(6); $url= $pgm['home']; $category = $val; if ($category == "ランキング") { $url= $pgm['home'].'/ranking?tab=voice'; $q = '//div[@id="voice_ranking"]/div/a'; $mode = 2; } else { $url= $pgm['home']; $q = "//a[@data-categoryname=\"$category\"]"; $mode = 0; } echo_msg(2,"カテゴリ：'$category'"); $lists = ht_audee_src_url("Audee Podcast category",0,$url,$q,$mode); break; case "0704": $ht_jump_btn2 = 1; $ht_jump_btn1_label = "選択"; $ht_jump_btn2_label = "preset登録"; $ad = explode(",",$val); $ttl = 'オールナイトニッポンpodcast('.$val.')'; $multi = 0; $lists = ht_pcast_rss_lfr($ttl,$multi,$ad[0],$ad[1]); break; case "0705": $ht_jump_btn2 = 1; $ht_jump_btn3 = 1; $ht_jump_btn1_label = "再生"; $ht_jump_btn2_label = "再生(サーバ)"; $ht_jump_btn3_label = "download"; if (!is_dir($pcastdir.$val)) @mkdir($pcastdir.$val); ht_sel_usrdir($pcastdir,$val,0,0,1); break; default: ht_development($subno,$val,2); break; } 